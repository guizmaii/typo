/**
 * File has been automatically generated by `typo` for internal use.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 *
 * (If you're developing `typo` and want to change it: run `bleep generate-sources`)
 */
package typo
package generated
package pg_catalog
package pg_class

import anorm.NamedParameter
import anorm.ParameterValue
import anorm.RowParser
import anorm.SqlStringInterpolation
import anorm.Success
import anorm.ToStatement
import java.sql.Connection
import java.sql.PreparedStatement
import org.postgresql.util.PGobject

object PgClassRepoImpl extends PgClassRepo {
  override def delete(oid: PgClassId)(implicit c: Connection): Boolean = {
    SQL"delete from pg_catalog.pg_class where oid = $oid".executeUpdate() > 0
  }
  override def insert(oid: PgClassId, unsaved: PgClassRowUnsaved)(implicit c: Connection): PgClassRow = {
    SQL"""insert into pg_catalog.pg_class(oid, relname, relnamespace, reltype, reloftype, relowner, relam, relfilenode, reltablespace, relpages, reltuples, relallvisible, reltoastrelid, relhasindex, relisshared, relpersistence, relkind, relnatts, relchecks, relhasrules, relhastriggers, relhassubclass, relrowsecurity, relforcerowsecurity, relispopulated, relreplident, relispartition, relrewrite, relfrozenxid, relminmxid, relacl, reloptions, relpartbound)
          values (${oid}::oid, ${unsaved.relname}::name, ${unsaved.relnamespace}::oid, ${unsaved.reltype}::oid, ${unsaved.reloftype}::oid, ${unsaved.relowner}::oid, ${unsaved.relam}::oid, ${unsaved.relfilenode}::oid, ${unsaved.reltablespace}::oid, ${unsaved.relpages}::int4, ${unsaved.reltuples}::float4, ${unsaved.relallvisible}::int4, ${unsaved.reltoastrelid}::oid, ${unsaved.relhasindex}, ${unsaved.relisshared}, ${unsaved.relpersistence}::char, ${unsaved.relkind}::char, ${unsaved.relnatts}::int2, ${unsaved.relchecks}::int2, ${unsaved.relhasrules}, ${unsaved.relhastriggers}, ${unsaved.relhassubclass}, ${unsaved.relrowsecurity}, ${unsaved.relforcerowsecurity}, ${unsaved.relispopulated}, ${unsaved.relreplident}::char, ${unsaved.relispartition}, ${unsaved.relrewrite}::oid, ${unsaved.relfrozenxid}::xid, ${unsaved.relminmxid}::xid, ${unsaved.relacl}::_aclitem, ${unsaved.reloptions}::_text, ${unsaved.relpartbound}::pg_node_tree)
          returning oid, relname, relnamespace, reltype, reloftype, relowner, relam, relfilenode, reltablespace, relpages, reltuples, relallvisible, reltoastrelid, relhasindex, relisshared, relpersistence, relkind, relnatts, relchecks, relhasrules, relhastriggers, relhassubclass, relrowsecurity, relforcerowsecurity, relispopulated, relreplident, relispartition, relrewrite, relfrozenxid, relminmxid, relacl, reloptions, relpartbound
       """
      .executeInsert(rowParser.single)
  
  }
  override def selectAll(implicit c: Connection): List[PgClassRow] = {
    SQL"""select oid, relname, relnamespace, reltype, reloftype, relowner, relam, relfilenode, reltablespace, relpages, reltuples, relallvisible, reltoastrelid, relhasindex, relisshared, relpersistence, relkind, relnatts, relchecks, relhasrules, relhastriggers, relhassubclass, relrowsecurity, relforcerowsecurity, relispopulated, relreplident, relispartition, relrewrite, relfrozenxid, relminmxid, relacl, reloptions, relpartbound
          from pg_catalog.pg_class
       """.as(rowParser.*)
  }
  override def selectByFieldValues(fieldValues: List[PgClassFieldOrIdValue[_]])(implicit c: Connection): List[PgClassRow] = {
    fieldValues match {
      case Nil => selectAll
      case nonEmpty =>
        val namedParams = nonEmpty.map{
          case PgClassFieldValue.oid(value) => NamedParameter("oid", ParameterValue.from(value))
          case PgClassFieldValue.relname(value) => NamedParameter("relname", ParameterValue.from(value))
          case PgClassFieldValue.relnamespace(value) => NamedParameter("relnamespace", ParameterValue.from(value))
          case PgClassFieldValue.reltype(value) => NamedParameter("reltype", ParameterValue.from(value))
          case PgClassFieldValue.reloftype(value) => NamedParameter("reloftype", ParameterValue.from(value))
          case PgClassFieldValue.relowner(value) => NamedParameter("relowner", ParameterValue.from(value))
          case PgClassFieldValue.relam(value) => NamedParameter("relam", ParameterValue.from(value))
          case PgClassFieldValue.relfilenode(value) => NamedParameter("relfilenode", ParameterValue.from(value))
          case PgClassFieldValue.reltablespace(value) => NamedParameter("reltablespace", ParameterValue.from(value))
          case PgClassFieldValue.relpages(value) => NamedParameter("relpages", ParameterValue.from(value))
          case PgClassFieldValue.reltuples(value) => NamedParameter("reltuples", ParameterValue.from(value))
          case PgClassFieldValue.relallvisible(value) => NamedParameter("relallvisible", ParameterValue.from(value))
          case PgClassFieldValue.reltoastrelid(value) => NamedParameter("reltoastrelid", ParameterValue.from(value))
          case PgClassFieldValue.relhasindex(value) => NamedParameter("relhasindex", ParameterValue.from(value))
          case PgClassFieldValue.relisshared(value) => NamedParameter("relisshared", ParameterValue.from(value))
          case PgClassFieldValue.relpersistence(value) => NamedParameter("relpersistence", ParameterValue.from(value))
          case PgClassFieldValue.relkind(value) => NamedParameter("relkind", ParameterValue.from(value))
          case PgClassFieldValue.relnatts(value) => NamedParameter("relnatts", ParameterValue.from(value))
          case PgClassFieldValue.relchecks(value) => NamedParameter("relchecks", ParameterValue.from(value))
          case PgClassFieldValue.relhasrules(value) => NamedParameter("relhasrules", ParameterValue.from(value))
          case PgClassFieldValue.relhastriggers(value) => NamedParameter("relhastriggers", ParameterValue.from(value))
          case PgClassFieldValue.relhassubclass(value) => NamedParameter("relhassubclass", ParameterValue.from(value))
          case PgClassFieldValue.relrowsecurity(value) => NamedParameter("relrowsecurity", ParameterValue.from(value))
          case PgClassFieldValue.relforcerowsecurity(value) => NamedParameter("relforcerowsecurity", ParameterValue.from(value))
          case PgClassFieldValue.relispopulated(value) => NamedParameter("relispopulated", ParameterValue.from(value))
          case PgClassFieldValue.relreplident(value) => NamedParameter("relreplident", ParameterValue.from(value))
          case PgClassFieldValue.relispartition(value) => NamedParameter("relispartition", ParameterValue.from(value))
          case PgClassFieldValue.relrewrite(value) => NamedParameter("relrewrite", ParameterValue.from(value))
          case PgClassFieldValue.relfrozenxid(value) => NamedParameter("relfrozenxid", ParameterValue.from(value))
          case PgClassFieldValue.relminmxid(value) => NamedParameter("relminmxid", ParameterValue.from(value))
          case PgClassFieldValue.relacl(value) => NamedParameter("relacl", ParameterValue.from(value))
          case PgClassFieldValue.reloptions(value) => NamedParameter("reloptions", ParameterValue.from(value))
          case PgClassFieldValue.relpartbound(value) => NamedParameter("relpartbound", ParameterValue.from(value))
        }
        val q = s"""select oid, relname, relnamespace, reltype, reloftype, relowner, relam, relfilenode, reltablespace, relpages, reltuples, relallvisible, reltoastrelid, relhasindex, relisshared, relpersistence, relkind, relnatts, relchecks, relhasrules, relhastriggers, relhassubclass, relrowsecurity, relforcerowsecurity, relispopulated, relreplident, relispartition, relrewrite, relfrozenxid, relminmxid, relacl, reloptions, relpartbound
                    from pg_catalog.pg_class
                    where ${namedParams.map(x => s"${x.name} = {${x.name}}").mkString(" AND ")}
                 """
        // this line is here to include an extension method which is only needed for scala 3. no import is emitted for `SQL` to avoid warning for scala 2
        import anorm._
        SQL(q)
          .on(namedParams: _*)
          .as(rowParser.*)
    }
  
  }
  override def selectById(oid: PgClassId)(implicit c: Connection): Option[PgClassRow] = {
    SQL"""select oid, relname, relnamespace, reltype, reloftype, relowner, relam, relfilenode, reltablespace, relpages, reltuples, relallvisible, reltoastrelid, relhasindex, relisshared, relpersistence, relkind, relnatts, relchecks, relhasrules, relhastriggers, relhassubclass, relrowsecurity, relforcerowsecurity, relispopulated, relreplident, relispartition, relrewrite, relfrozenxid, relminmxid, relacl, reloptions, relpartbound
          from pg_catalog.pg_class
          where oid = $oid
       """.as(rowParser.singleOpt)
  }
  override def selectByIds(oids: Array[PgClassId])(implicit c: Connection): List[PgClassRow] = {
    implicit val toStatement: ToStatement[Array[PgClassId]] =
      (s: PreparedStatement, index: Int, v: Array[PgClassId]) =>
        s.setArray(index, s.getConnection.createArrayOf("oid", v.map(x => x.value: java.lang.Long)))
    
    SQL"""select oid, relname, relnamespace, reltype, reloftype, relowner, relam, relfilenode, reltablespace, relpages, reltuples, relallvisible, reltoastrelid, relhasindex, relisshared, relpersistence, relkind, relnatts, relchecks, relhasrules, relhastriggers, relhassubclass, relrowsecurity, relforcerowsecurity, relispopulated, relreplident, relispartition, relrewrite, relfrozenxid, relminmxid, relacl, reloptions, relpartbound
          from pg_catalog.pg_class
          where oid = ANY($oids)
       """.as(rowParser.*)
  
  }
  override def selectByUnique(relname: String, relnamespace: /* oid */ Long)(implicit c: Connection): Option[PgClassRow] = {
    selectByFieldValues(List(PgClassFieldValue.relname(relname), PgClassFieldValue.relnamespace(relnamespace))).headOption
  }
  override def update(row: PgClassRow)(implicit c: Connection): Boolean = {
    val oid = row.oid
    SQL"""update pg_catalog.pg_class
          set relname = ${row.relname}::name,
              relnamespace = ${row.relnamespace}::oid,
              reltype = ${row.reltype}::oid,
              reloftype = ${row.reloftype}::oid,
              relowner = ${row.relowner}::oid,
              relam = ${row.relam}::oid,
              relfilenode = ${row.relfilenode}::oid,
              reltablespace = ${row.reltablespace}::oid,
              relpages = ${row.relpages}::int4,
              reltuples = ${row.reltuples}::float4,
              relallvisible = ${row.relallvisible}::int4,
              reltoastrelid = ${row.reltoastrelid}::oid,
              relhasindex = ${row.relhasindex},
              relisshared = ${row.relisshared},
              relpersistence = ${row.relpersistence}::char,
              relkind = ${row.relkind}::char,
              relnatts = ${row.relnatts}::int2,
              relchecks = ${row.relchecks}::int2,
              relhasrules = ${row.relhasrules},
              relhastriggers = ${row.relhastriggers},
              relhassubclass = ${row.relhassubclass},
              relrowsecurity = ${row.relrowsecurity},
              relforcerowsecurity = ${row.relforcerowsecurity},
              relispopulated = ${row.relispopulated},
              relreplident = ${row.relreplident}::char,
              relispartition = ${row.relispartition},
              relrewrite = ${row.relrewrite}::oid,
              relfrozenxid = ${row.relfrozenxid}::xid,
              relminmxid = ${row.relminmxid}::xid,
              relacl = ${row.relacl}::_aclitem,
              reloptions = ${row.reloptions}::_text,
              relpartbound = ${row.relpartbound}::pg_node_tree
          where oid = $oid
       """.executeUpdate() > 0
  }
  override def updateFieldValues(oid: PgClassId, fieldValues: List[PgClassFieldValue[_]])(implicit c: Connection): Boolean = {
    fieldValues match {
      case Nil => false
      case nonEmpty =>
        val namedParams = nonEmpty.map{
          case PgClassFieldValue.relname(value) => NamedParameter("relname", ParameterValue.from(value))
          case PgClassFieldValue.relnamespace(value) => NamedParameter("relnamespace", ParameterValue.from(value))
          case PgClassFieldValue.reltype(value) => NamedParameter("reltype", ParameterValue.from(value))
          case PgClassFieldValue.reloftype(value) => NamedParameter("reloftype", ParameterValue.from(value))
          case PgClassFieldValue.relowner(value) => NamedParameter("relowner", ParameterValue.from(value))
          case PgClassFieldValue.relam(value) => NamedParameter("relam", ParameterValue.from(value))
          case PgClassFieldValue.relfilenode(value) => NamedParameter("relfilenode", ParameterValue.from(value))
          case PgClassFieldValue.reltablespace(value) => NamedParameter("reltablespace", ParameterValue.from(value))
          case PgClassFieldValue.relpages(value) => NamedParameter("relpages", ParameterValue.from(value))
          case PgClassFieldValue.reltuples(value) => NamedParameter("reltuples", ParameterValue.from(value))
          case PgClassFieldValue.relallvisible(value) => NamedParameter("relallvisible", ParameterValue.from(value))
          case PgClassFieldValue.reltoastrelid(value) => NamedParameter("reltoastrelid", ParameterValue.from(value))
          case PgClassFieldValue.relhasindex(value) => NamedParameter("relhasindex", ParameterValue.from(value))
          case PgClassFieldValue.relisshared(value) => NamedParameter("relisshared", ParameterValue.from(value))
          case PgClassFieldValue.relpersistence(value) => NamedParameter("relpersistence", ParameterValue.from(value))
          case PgClassFieldValue.relkind(value) => NamedParameter("relkind", ParameterValue.from(value))
          case PgClassFieldValue.relnatts(value) => NamedParameter("relnatts", ParameterValue.from(value))
          case PgClassFieldValue.relchecks(value) => NamedParameter("relchecks", ParameterValue.from(value))
          case PgClassFieldValue.relhasrules(value) => NamedParameter("relhasrules", ParameterValue.from(value))
          case PgClassFieldValue.relhastriggers(value) => NamedParameter("relhastriggers", ParameterValue.from(value))
          case PgClassFieldValue.relhassubclass(value) => NamedParameter("relhassubclass", ParameterValue.from(value))
          case PgClassFieldValue.relrowsecurity(value) => NamedParameter("relrowsecurity", ParameterValue.from(value))
          case PgClassFieldValue.relforcerowsecurity(value) => NamedParameter("relforcerowsecurity", ParameterValue.from(value))
          case PgClassFieldValue.relispopulated(value) => NamedParameter("relispopulated", ParameterValue.from(value))
          case PgClassFieldValue.relreplident(value) => NamedParameter("relreplident", ParameterValue.from(value))
          case PgClassFieldValue.relispartition(value) => NamedParameter("relispartition", ParameterValue.from(value))
          case PgClassFieldValue.relrewrite(value) => NamedParameter("relrewrite", ParameterValue.from(value))
          case PgClassFieldValue.relfrozenxid(value) => NamedParameter("relfrozenxid", ParameterValue.from(value))
          case PgClassFieldValue.relminmxid(value) => NamedParameter("relminmxid", ParameterValue.from(value))
          case PgClassFieldValue.relacl(value) => NamedParameter("relacl", ParameterValue.from(value))
          case PgClassFieldValue.reloptions(value) => NamedParameter("reloptions", ParameterValue.from(value))
          case PgClassFieldValue.relpartbound(value) => NamedParameter("relpartbound", ParameterValue.from(value))
        }
        val quote = '"'.toString
        val q = s"""update pg_catalog.pg_class
                    set ${namedParams.map(x => s"${quote}${x.name}${quote} = {${x.name}}").mkString(", ")}
                    where oid = {oid}
                 """
        // this line is here to include an extension method which is only needed for scala 3. no import is emitted for `SQL` to avoid warning for scala 2
        import anorm._
        SQL(q)
          .on(namedParams: _*)
          .on(NamedParameter("oid", ParameterValue.from(oid)))
          .executeUpdate() > 0
    }
  
  }
  val rowParser: RowParser[PgClassRow] =
    RowParser[PgClassRow] { row =>
      Success(
        PgClassRow(
          oid = row[PgClassId]("oid"),
          relname = row[String]("relname"),
          relnamespace = row[/* oid */ Long]("relnamespace"),
          reltype = row[/* oid */ Long]("reltype"),
          reloftype = row[/* oid */ Long]("reloftype"),
          relowner = row[/* oid */ Long]("relowner"),
          relam = row[/* oid */ Long]("relam"),
          relfilenode = row[/* oid */ Long]("relfilenode"),
          reltablespace = row[/* oid */ Long]("reltablespace"),
          relpages = row[Int]("relpages"),
          reltuples = row[Float]("reltuples"),
          relallvisible = row[Int]("relallvisible"),
          reltoastrelid = row[/* oid */ Long]("reltoastrelid"),
          relhasindex = row[Boolean]("relhasindex"),
          relisshared = row[Boolean]("relisshared"),
          relpersistence = row[String]("relpersistence"),
          relkind = row[String]("relkind"),
          relnatts = row[Int]("relnatts"),
          relchecks = row[Int]("relchecks"),
          relhasrules = row[Boolean]("relhasrules"),
          relhastriggers = row[Boolean]("relhastriggers"),
          relhassubclass = row[Boolean]("relhassubclass"),
          relrowsecurity = row[Boolean]("relrowsecurity"),
          relforcerowsecurity = row[Boolean]("relforcerowsecurity"),
          relispopulated = row[Boolean]("relispopulated"),
          relreplident = row[String]("relreplident"),
          relispartition = row[Boolean]("relispartition"),
          relrewrite = row[/* oid */ Long]("relrewrite"),
          relfrozenxid = row[/* xid */ PGobject]("relfrozenxid"),
          relminmxid = row[/* xid */ PGobject]("relminmxid"),
          relacl = row[Option[Array[/* aclitem */ PGobject]]]("relacl"),
          reloptions = row[Option[Array[String]]]("reloptions"),
          relpartbound = row[Option[/* pg_node_tree */ PGobject]]("relpartbound")
        )
      )
    }
}
