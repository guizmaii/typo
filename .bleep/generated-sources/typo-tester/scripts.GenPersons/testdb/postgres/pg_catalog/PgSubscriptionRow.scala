/**
 * File automatically generated by `typo` for its own test suite.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN
 */
package testdb
package postgres
package pg_catalog

import anorm.RowParser
import anorm.Success
import play.api.libs.json.JsObject
import play.api.libs.json.JsResult
import play.api.libs.json.JsValue
import play.api.libs.json.Json
import play.api.libs.json.OFormat
import scala.util.Try

case class PgSubscriptionRow(
  oid: PgSubscriptionId,
  subdbid: /* oid */ Long,
  subname: String,
  subowner: /* oid */ Long,
  subenabled: Boolean,
  subbinary: Boolean,
  substream: Boolean,
  subconninfo: String,
  subslotname: Option[String],
  subsynccommit: String,
  subpublications: Array[String]
)

object PgSubscriptionRow {
  def rowParser(prefix: String): RowParser[PgSubscriptionRow] = { row =>
    Success(
      PgSubscriptionRow(
        oid = row[PgSubscriptionId](prefix + "oid"),
        subdbid = row[/* oid */ Long](prefix + "subdbid"),
        subname = row[String](prefix + "subname"),
        subowner = row[/* oid */ Long](prefix + "subowner"),
        subenabled = row[Boolean](prefix + "subenabled"),
        subbinary = row[Boolean](prefix + "subbinary"),
        substream = row[Boolean](prefix + "substream"),
        subconninfo = row[String](prefix + "subconninfo"),
        subslotname = row[Option[String]](prefix + "subslotname"),
        subsynccommit = row[String](prefix + "subsynccommit"),
        subpublications = row[Array[String]](prefix + "subpublications")
      )
    )
  }

  implicit val oFormat: OFormat[PgSubscriptionRow] = new OFormat[PgSubscriptionRow]{
    override def writes(o: PgSubscriptionRow): JsObject =
      Json.obj(
        "oid" -> o.oid,
      "subdbid" -> o.subdbid,
      "subname" -> o.subname,
      "subowner" -> o.subowner,
      "subenabled" -> o.subenabled,
      "subbinary" -> o.subbinary,
      "substream" -> o.substream,
      "subconninfo" -> o.subconninfo,
      "subslotname" -> o.subslotname,
      "subsynccommit" -> o.subsynccommit,
      "subpublications" -> o.subpublications
      )

    override def reads(json: JsValue): JsResult[PgSubscriptionRow] = {
      JsResult.fromTry(
        Try(
          PgSubscriptionRow(
            oid = json.\("oid").as[PgSubscriptionId],
            subdbid = json.\("subdbid").as[/* oid */ Long],
            subname = json.\("subname").as[String],
            subowner = json.\("subowner").as[/* oid */ Long],
            subenabled = json.\("subenabled").as[Boolean],
            subbinary = json.\("subbinary").as[Boolean],
            substream = json.\("substream").as[Boolean],
            subconninfo = json.\("subconninfo").as[String],
            subslotname = json.\("subslotname").toOption.map(_.as[String]),
            subsynccommit = json.\("subsynccommit").as[String],
            subpublications = json.\("subpublications").as[Array[String]]
          )
        )
      )
    }
  }
}
